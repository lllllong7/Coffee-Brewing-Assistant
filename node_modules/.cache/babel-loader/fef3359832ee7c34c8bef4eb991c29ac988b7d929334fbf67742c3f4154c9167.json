{"ast":null,"code":"// Local storage utilities for bean profiles and brew logs\n\nconst STORAGE_KEYS = {\n  BEANS: 'coffee_beans',\n  BREWS: 'coffee_brews'\n};\n\n// Bean profile operations\nexport const getBeans = () => {\n  try {\n    const beans = localStorage.getItem(STORAGE_KEYS.BEANS);\n    return beans ? JSON.parse(beans) : [];\n  } catch (error) {\n    console.error('Error loading beans:', error);\n    return [];\n  }\n};\nexport const saveBean = bean => {\n  try {\n    const beans = getBeans();\n    const existingIndex = beans.findIndex(b => b.id === bean.id);\n    if (existingIndex >= 0) {\n      beans[existingIndex] = bean;\n    } else {\n      bean.id = Date.now().toString();\n      bean.createdAt = new Date().toISOString();\n      beans.push(bean);\n    }\n    localStorage.setItem(STORAGE_KEYS.BEANS, JSON.stringify(beans));\n    return bean;\n  } catch (error) {\n    console.error('Error saving bean:', error);\n    throw error;\n  }\n};\nexport const deleteBean = beanId => {\n  try {\n    const beans = getBeans();\n    const filteredBeans = beans.filter(b => b.id !== beanId);\n    localStorage.setItem(STORAGE_KEYS.BEANS, JSON.stringify(filteredBeans));\n\n    // Also delete associated brews\n    const brews = getBrews();\n    const filteredBrews = brews.filter(b => b.beanId !== beanId);\n    localStorage.setItem(STORAGE_KEYS.BREWS, JSON.stringify(filteredBrews));\n  } catch (error) {\n    console.error('Error deleting bean:', error);\n    throw error;\n  }\n};\n\n// Brew log operations\nexport const getBrews = () => {\n  try {\n    const brews = localStorage.getItem(STORAGE_KEYS.BREWS);\n    return brews ? JSON.parse(brews) : [];\n  } catch (error) {\n    console.error('Error loading brews:', error);\n    return [];\n  }\n};\nexport const getBrewsForBean = beanId => {\n  const allBrews = getBrews();\n  return allBrews.filter(brew => brew.beanId === beanId).sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n};\nexport const saveBrew = brew => {\n  try {\n    const brews = getBrews();\n    brew.id = Date.now().toString();\n    brew.createdAt = new Date().toISOString();\n    brews.push(brew);\n    localStorage.setItem(STORAGE_KEYS.BREWS, JSON.stringify(brews));\n    return brew;\n  } catch (error) {\n    console.error('Error saving brew:', error);\n    throw error;\n  }\n};\nexport const getRecentBrews = (limit = 5) => {\n  const allBrews = getBrews();\n  return allBrews.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)).slice(0, limit);\n};","map":{"version":3,"names":["STORAGE_KEYS","BEANS","BREWS","getBeans","beans","localStorage","getItem","JSON","parse","error","console","saveBean","bean","existingIndex","findIndex","b","id","Date","now","toString","createdAt","toISOString","push","setItem","stringify","deleteBean","beanId","filteredBeans","filter","brews","getBrews","filteredBrews","getBrewsForBean","allBrews","brew","sort","a","saveBrew","getRecentBrews","limit","slice"],"sources":["/Users/wanglinlong/CascadeProjects/coffee-brewing-assistant/src/utils/storage.js"],"sourcesContent":["// Local storage utilities for bean profiles and brew logs\n\nconst STORAGE_KEYS = {\n  BEANS: 'coffee_beans',\n  BREWS: 'coffee_brews'\n};\n\n// Bean profile operations\nexport const getBeans = () => {\n  try {\n    const beans = localStorage.getItem(STORAGE_KEYS.BEANS);\n    return beans ? JSON.parse(beans) : [];\n  } catch (error) {\n    console.error('Error loading beans:', error);\n    return [];\n  }\n};\n\nexport const saveBean = (bean) => {\n  try {\n    const beans = getBeans();\n    const existingIndex = beans.findIndex(b => b.id === bean.id);\n    \n    if (existingIndex >= 0) {\n      beans[existingIndex] = bean;\n    } else {\n      bean.id = Date.now().toString();\n      bean.createdAt = new Date().toISOString();\n      beans.push(bean);\n    }\n    \n    localStorage.setItem(STORAGE_KEYS.BEANS, JSON.stringify(beans));\n    return bean;\n  } catch (error) {\n    console.error('Error saving bean:', error);\n    throw error;\n  }\n};\n\nexport const deleteBean = (beanId) => {\n  try {\n    const beans = getBeans();\n    const filteredBeans = beans.filter(b => b.id !== beanId);\n    localStorage.setItem(STORAGE_KEYS.BEANS, JSON.stringify(filteredBeans));\n    \n    // Also delete associated brews\n    const brews = getBrews();\n    const filteredBrews = brews.filter(b => b.beanId !== beanId);\n    localStorage.setItem(STORAGE_KEYS.BREWS, JSON.stringify(filteredBrews));\n  } catch (error) {\n    console.error('Error deleting bean:', error);\n    throw error;\n  }\n};\n\n// Brew log operations\nexport const getBrews = () => {\n  try {\n    const brews = localStorage.getItem(STORAGE_KEYS.BREWS);\n    return brews ? JSON.parse(brews) : [];\n  } catch (error) {\n    console.error('Error loading brews:', error);\n    return [];\n  }\n};\n\nexport const getBrewsForBean = (beanId) => {\n  const allBrews = getBrews();\n  return allBrews.filter(brew => brew.beanId === beanId)\n    .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n};\n\nexport const saveBrew = (brew) => {\n  try {\n    const brews = getBrews();\n    brew.id = Date.now().toString();\n    brew.createdAt = new Date().toISOString();\n    brews.push(brew);\n    \n    localStorage.setItem(STORAGE_KEYS.BREWS, JSON.stringify(brews));\n    return brew;\n  } catch (error) {\n    console.error('Error saving brew:', error);\n    throw error;\n  }\n};\n\nexport const getRecentBrews = (limit = 5) => {\n  const allBrews = getBrews();\n  return allBrews\n    .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\n    .slice(0, limit);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}